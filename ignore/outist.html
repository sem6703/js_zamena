<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href=
"data:image/gif;base64,R0lGODlhEAAQAPcAAP///wwQFAYRIFNALFA5Hx0SAgQJAAQMBQ8TEhENBREOCAoGB0g6KdCthc6lcbibbYFzWUA1IhcPAQoGAAQCAA8PBEc5IHdqVE5COCAZFiIhIXdqV7WVbK2IULujcb+ccMagc7yZbL6fcsCid8ish9i5i9C2j4x3XyccEkhHQh4eHamWgKyEW51zP6CHXquBU8ygadGiZtCjY8+jY8ygZ8WdaqSGY0U2JWFdVyQkILeafd6qedumbs2qf8Scc82mdM2kacqjYNGjZtenYMmcYLiWa0c1IK2Vd+C/kt+8itq+jdm7jNy8j+nGlfTPmvLGkeK2f92zcNemYMeZWY11UkI2JjUjDSMSABoQABwSACETADIiCFRBJYhxVMawkO7Up/HJkd2tb76bb1NENR4ZGBkXExIPDw8RFg4WHwwPEgsMDAMCAwYDAzEpHJh/YfbJkuayeKqMZygjGQcBAKOFX//Mkc+neS8rHSQfEvnQpNOsgS0oHwAOC72lhbSUbSYhGhwaGR4dGhQUFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFewAAACwAAAAAEAAQAAAItgABCGSwYYWOI1XKCFwoMMCABhxY7EBixQxDhgQcdGjBI8mVMxcFCijwwIOLHkqwoAkp0ACEDy98LMnCUuCBCCBg/GCipaZACSFiAGmyJY3PCSJkBHHCRY1PCiNmzHjSZU1NBBVI0BACxQubmgkslJAxJMqXNjUVXDBRg4gUMG7msFyA4YSNIlPCvKGDh0/IDChuGKEiBk6dPH0AXdSQAofAMXHs6PETSNBFFTkEkpFzZ8+fhQEBADs=">


  <title>otvet.mail.ru/question/234498848</title>
  <style>
  /*ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸*/
  /*ğŸ¸Ğ·Ğ°Ğ¹Ğ¼Ğ¸ÑÑŒ ÑÑ‚Ñ€Ğ¾ĞºĞ°Ğ¼Ğ¸ Ğ¿Ğ¾Ğ¼ĞµÑ‡ĞµĞ½Ñ‹Ğ¼Ğ¸ Ğ»ÑĞ³ÑƒÑˆĞºĞ¾Ğ¹ 478, 1059 ÑÑ‚Ğ¾ Ğ¿Ğ¸Ğ·Ğ´ĞµÑ†ğŸ¸*/
  /*ğŸ¸Ğ½ĞµĞ±Ğ¾ÑĞºÑ€ĞµĞ±Ñ‹ Ğ½Ğµ Ñ…Ğ¾Ğ´ÑÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹ğŸ¸*/
  /*ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸*/
  /* Ğ´ĞµĞ¼Ğ¾ Ğ³ĞµĞ¹Ğ¼Ğ¿Ğ»ĞµÑ https://www.youtube.com/watch?v=CJJdfhSjgFA */
/*
* Prefixed by https://autoprefixer.github.io/ru/
* PostCSS: v8.4.14,
* Autoprefixer: v10.4.7
* Browsers: last 4 version
* 'img/pm2.png'
*/

:root {
  --pict: url(gty.bmp);
}


*:not(hr), *::after, *::before {
	-webkit-box-sizing: border-box;
	box-sizing: border-box;
	margin:0;
	padding:0;
	border:0
	}

ul {list-style-type: none}
 
body{
	font-family: sans-serif;
	background-color:#ded
	} 
#i{
	display: none;
	padding: 33px 0;
	background: -webkit-gradient(linear, left top, left bottom, from(grey), to(#ded));
	background: -o-linear-gradient(grey, #ded);
	background: linear-gradient(grey, #ded); 
	text-align: center;
	}

.ivan{
	display: -ms-grid;
	display: grid; 
	place-items: center; 	
	width: 25px;	
	font-size: 16px;
}

.ira1{
	position: absolute;
	cursor: move; 
	color: white; 
	-webkit-user-select: none; 
	-moz-user-select: none; 
	-ms-user-select: none; 
	user-select: none;
	height: 20px;
    z-index: 9;
	background: #025202;/*green;*/
	}
.ira2{
	position: absolute;
	cursor: move; 
	color: white; 
	-webkit-user-select: none; 
	-moz-user-select: none; 
	-ms-user-select: none; 
	user-select: none;
	height: 20px;
    z-index: 10;
	background: red;/*green;*/
	}	
	
.iba1,.iba2{
	margin: 0 2px 30px;
	background: #00000023;
    }



.km{margin:2px;
	display: -ms-grid;
	display: grid; 
	d0isplay: none;
	place-items: center;
	width:43px;  
	border:4px solid blue;
	position: fixed; bottom: 0px;
	background: white;
	font-family : monospace;
	font-size:24px;
	-o-text-overflow: clip;
	   text-overflow: clip;
	color:black;
	letter-spacing:1px;
	z-index:6;
	}


.a:before{
	content: '';
	display:  block;
	position: absolute;
	width: 5px; 
	height: 20px;
	top: -27px;
	left: 15px;
	background: blue;
	}



.b:after{
	content: '';
	display: block;
	position: absolute;
	width: 35px; 
	height: 5px;
	top: -12px;
	left: 2px;
	background: blue;
	}
legend{
	font-family: monospace;
	font-size: 24px;
	text-align: center;
	color: blue;
	}


#m1,#m2,#m3{
	margin: auto; 
	color: white; 
	text-align: left;
	border: 5px solid white;
	font-family : monospace;
	width: -webkit-fit-content;
	width: -moz-fit-content;
	width: fit-content;
	padding: 20px 4%;
	font-size: 22px;
	letter-spacing: 8px;
	line-height: 37px;
	max-width: 800px;
	}
#m1{
	position: absolute; 
	top: 0; 
	left: 0;
	border: 5px solid #ffffff00;
	color: #00000080;
	background: white;
	}
#m2{
	position: absolute; 
	top: 0; 
	left: 0;
	background: transparent;
	padding-top: 5px;
	color: purple;
	font-weight: 700;
	}
#m3{
	visibility:hidden;
	}

article{
	margin: auto;
	position: relative;
	width: -webkit-fit-content;
	width: -moz-fit-content;
	width: fit-content;
	}

#deep {
	position: fixed; 
	bottom: 10px;	
	width: 100%;
	height: 444px;	
	z-index: 5;
}
#platr,#plate{
	padding: 1px 30px 0;
	position: absolute;
	top:0; 
	left: 0;	
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-webkit-box-pack: center;
	-ms-flex-pack: center;
	justify-content: center; 
	-webkit-box-align: start; 
	-ms-flex-align: start; 
	align-items: flex-start;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;	
	width: 100%;	
	}
#platr{visibility:hidden}	
#plate{visibility:hidden}

#fa{
	width: 100%;
	height: 444px;
	background: transparent;
	position: fixed; 
	bottom: 0;

	display: flex; 
	display: none;	
	-webkit-box-align: start;
	-ms-flex-align: start; 
	align-items: flex-start;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
	z-index:6;
	}
#pex{display: none;}	

button{
	margin: 1px;
	padding: 8px 16px; 
	background: #efd;
	border: 2px solid blue; 
	border-radius: 5px;
	font-size: 21px;
	cursor:pointer;
	-webkit-transition: all 1s;
	-o-transition: all 1s;
	transition: all 1s
	}
button:hover{background: #fff;}
p{
	height: 444px; 
	visibility: hidden;
	}
nav{
	position: fixed;
	top: 20px;
	left: 0;
	display: -webkit-box;
	display: -ms-flexbox;
	display: none;/*flex; */
	-webkit-box-orient: vertical; 
	-webkit-box-direction: normal; 
	-ms-flex-direction: column; 
	flex-direction: column;
	}
#cop{
	width: calc(100% - 6px);
	height: 222px;
	background: #ded;
	position: absolute; 
	left: -9999px;
	}
#graf{
	position: fixed;
	top: 1px; right: 1px;
	display: grid;
	display: none;
	place-items: center;
	width: 44px; aspect-ratio: 1;
	background: #ded;
	border-radius: 20px;
	font-size: 30px;
	cursor: pointer;
	border: 3px solid purple;
	z-index: 50;
}
#graf:hover{transform: scale(1.1)}
	
/* proga 2 */

#i100{padding: 33px 0;background: linear-gradient(rgba(0,0,0,0.9), blue); 
text-align: center;
}

.ki{
	margin:1px;width:45px;height:60px;
	position: relative;
	display: inline-block;
	b0ackground: url(img/pm.png);
	b0ackground: url(var(--pict));	
	background: var(--pict);		
	background-position: left 0px top -328px;
	background-size: 2500%;/*auto;*/
	b0ackground-size: cover;
	background-repeat: no-repeat;
	background-attachment: local;
	border:4px solid white; border-radius:4px;
	}
.kolvo{
	p0adding:2px;
	position: absolute;
	font-weight:900;
	color: blue;
	bottom:0; right:0;
	w0idth:15px; a0spect-ratio:1;
	background: none;/*white;*/
	}	
.meta{
	padding:2px;
	position: absolute;
	bottom:0; left:0;
	width:15px; aspect-ratio:1;
	background: white;
	}

	
	

.uni{display: none;}

.ki:has(.uni:checked){border-color: lime;}

#b23{padding:10px;cursor:pointer;border-radius:12px;}

.ink1{fill:gold !important;}
  </style>  
</head>
<body>
	<nav id="nav">
		<button id="btn1" onclick="
			ir['ru'].forEach((x,i)=>{
				x.style.top=ib['ru'][i].offsetTop+'px';
				x.style.left=ib['ru'][i].offsetLeft+'px';});	
			ir['en'].forEach((x,i)=>{
				x.style.top=ib['en'][i].offsetTop+'px';
				x.style.left=ib['en'][i].offsetLeft+'px';});								
			conny(nom);// Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ´ĞµÑˆĞ¸
		">reset</button>
		<button onclick="
			cop.value=m2.innerText;
			cop.select();
			document.execCommand('copy');
			window.getSelection()?.removeAllRanges();
			m1.style.color='#00000000';//.value='';//
		">copy</button>
		<button onclick="
			navigator.clipboard.readText()
				.then(text => {
				text=[...text].map(i=>i.toUpperCase()).join('');
				cop.value=text;
				main(cop.value);
				btn1.onclick();
				})
				.catch(err => {
				console.log('Oblomingo flyed pass', err);
				});
				
		">paste</button>		
	</nav>
	<textarea id="cop">Ğ´Ğ»Ñ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ</textarea>
	
	
<!-- begin proga 2  -->	
<section id="pro2">
<div id="kv" style="position:fixed;top:44px;left:6px;
background-color: black;width:223px; height:670px;a0spect-ratio:1;
padding:1px;
">
<button id="b23" style="visibility:hidden;">union</button><br>
<button class="ki" style=""></button>

</div>

<div id="barright" style="position:fixed;top:44px;right:118px;
background-color: black;width:93px; height:670px;a0spect-ratio:1;
padding:1px;
">
<button onclick="shz(this)"></button><br>
<button onclick="shz(this)">*</button><br>
<button onclick="shz(this)">a</button><br>
<button onclick="shz(this)">b</button><br>
<button onclick="shz(this)">c</button><br>
<button onclick="shz(this)">f</button><br>
<button onclick="shz(this)">d</button><br>
<button onclick="shz(this)">e</button><br>
</div>

<div id="d1" style="margin-top: 33px;width:23px;aspect-ratio:1; background: yellow;border:5px solid white;display:none;v0isibility:hidden;"></div>
<center>
<button id="bph" style="
margin:0; padding:0;
overflow:hidden;
h0eight:328px;
background: #23282c;
b0ackground-image: url(img/pm.png);
background: var(--pict);	
background-position: left top;
background-size: cover;
background-repeat: no-repeat;
background-attachment: local;
">	
<!-- <svg id="g" width="450" height="328" viewBox="0 0 450 328" fill="none" -->

<svg id="g" width="900" height="656" viewBox="0 0 900 656" fill="none"
onclick="
if(r) {r=false; return 0;}
let xx=event.clientX-bph.offsetLeft;
let yy=event.clientY-bph.offsetTop;

let ww=89;/// ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ĞµÑÑ‚Ğ°
let hh=130;/// Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ĞµÑÑ‚Ğ°

if (yy>fu1&&yy<fu2&&xx>fx) // Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ„Ğ°Ñ€Ğ²Ğ°Ñ‚ĞµÑ€  
	{
	//if((xx-fx)>15){xx=fx+20.7} // ÑƒÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‚ĞºĞ¸ Ğ¼Ğ¾Ğ½Ğ¾ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ½Ñ‹Ñ… ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²- Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ Ğ² ĞºĞ¾Ğ½ĞµÑ† ÑÑ‚Ñ€Ğ¾ĞºĞ¸, Ğ±ÑƒĞ´ÑƒÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒÑÑ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ñ‹ ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ¾Ğ¹ 20,7
	if((xx-fx-5)>ww){xx=fx+ww}
	//if((xx-fx)>55){xx=fx+50}
	//console.log(xx-fx);
	//alert(yy+ ' '+fu1+' '+fu2);
	yrr.push({x:fx,y:fu1,w:xx-fx,h:fu2-fu1,
	stroke:'red',opacity:'0.2',fill:'lime',a:' ',});
	fx=xx;
	fu1=fu1; // ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‰ĞµĞ»Ñ‡ĞµĞº Ğ·Ğ°Ğ´Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ„Ğ°Ñ€Ğ²Ğ°Ñ‚ĞµÑ€
	fu2=fu2;		
	}
	else
	{
	yrr.push({x:xx,y:yy,w:ww,h:hh,
	stroke:'red',opacity:'0.2',fill:'lime',a:' ',});
	fx=xx+ww;
	fu1=yy; // ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‰ĞµĞ»Ñ‡ĞµĞº Ğ·Ğ°Ğ´Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ„Ğ°Ñ€Ğ²Ğ°Ñ‚ĞµÑ€
	fu2=yy+hh;	
	
	}

fx_wat();// ÑĞ»ĞµĞ¶ĞºĞ° Ğ·Ğ° fx
let w=yrr.push()-1;
q=w;// ĞºÑƒÑ€ÑĞ¾Ñ€ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ¾Ğ²//
ben=true;
g.innerHTML+=`<rect id=ux${w} x=${(yrr[w].x).toFixed(1)} y=${yrr[w].y} width=${(yrr[w].w).toFixed(1)} height=${yrr[w].h} opacity=.2 fill=lime stroke=red onclick=fn(this,this.getAttribute('fill'),${w})></rect>`;
">
<line id="line" x1="0" y1="1" x2="0" y2="2500" stroke="teal" />
</svg>
</button>
<!--  opacity=.2 fill=lime stroke=red  -->
<!--   class=ink1 -->

<div id=i100>
<button id="btn3" style="margin-right:100px;padding: 4px;border-radius: 4px;font-size: 16px;">do group</button>
<button id="btn2" style="padding: 4px;border-radius: 4px;font-size: 16px;"
onclick="
	proga=proga^1^2;
	//alert(proga);
	if (proga===2){
	fa.style.display='none';
		nav.style.display='none';
		//kv.style.display='block';
		pro2.style.display='block';
		}
	if (proga===1){
		fa.style.display='flex';
		nav.style.display='flex';
		pro2.style.display='none';
		
		
		i.style.display='block';
		graf.style.display='grid';
		fa.style.display='flex';
		pex.style.display='flex';		
		
		}
	//
	console.log('jopa');
	ss=ta1.value;
	//ss='ĞĞ‘Ğ’Ğ“';
	//ss='ĞĞ‘Ğ‘Ğ‘Ğ’Ğ“';//ğŸ¸
	
	main(ss);
	

	btn1.onclick();//
"
> NEXT ğŸ”»ï¸ </button>

</div>
<textarea id="ta1" rows="2" cols="90" style="color: white; background: #1a0e5a;">

</textarea>

</section>
	
<!-- end proga 2  -->		
	

	<div id=i>
		<article>
			<div id="m3"></div>
			<div id="m1"></div>
			<div id="m2"></div>
		</article>
		<div id="deep">
			<div id="platr" style="background: fuchsia;	"></div>
			<div id="plate"	style="background: purple;	"></div>		
		</div>
	</div>
	<form id="fa"></form>
	<p id="pex"></p>	
	
<div id="graf" onclick="
	dataru=!dataru;
	nom=['en','ru'][+dataru];// Ğ¸Ğ¼Ñ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ğ°
	this.innerText=nom;
	ir[nom].forEach(x=>{x.style.visibility='visible'});
	ir[['en','ru'][+!dataru]].forEach(x=>{x.style.visibility='hidden'});

	conny(nom);
">ru</div>	

<script>
'use strict';
//*******************************************************************
//*******************************************************************
//**a, q,yrr,ben, fx, fu1, fu2, hb, bb, aa, alf, m, mySet, kax, kay, r,**
const kax=1.0;//2.06*0.49;//2.6;//1.6;//
const kay=1.0;//2.06*0.49;//2.6;
let fu1=0, fu2=0, fx=0;
let q=0;// ĞºÑƒÑ€ÑĞ¾Ñ€ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ¾Ğ²
let bb=[];// Ğ²ÑĞµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ² Ğ±ÑƒĞºĞ²
let r=false;
let ben=true;
//let ux;
let yrr=[


];
let bvb=[];// Ğ²ÑĞµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ² Ğ±ÑƒĞºĞ² + Ğ¼ĞµÑ‚ĞºĞ°

//function fn(x){x.setAttribute('fill',['lime','none'][1^['lime','none'].indexOf(x.getAttribute('fill'))])}
//let c=['lime','none'];
//let c=['none','lime'];
function fn(x,y,z)
	{
	ben=true;
	if(y=='lime')
	{x.setAttribute('fill','red');x.setAttribute('opacity','.5');yrr[z]['fill']='red'}
	if(y=='red')//else
	{x.setAttribute('fill','lime');x.setAttribute('opacity','.2');yrr[z]['fill']='lime'}
	if(y=='black')//else
	{x.setAttribute('fill','lime');x.setAttribute('opacity','.2');yrr[z]['fill']='lime'}
	r=true;
	q=z;//
	}

btn3.addEventListener('click',()=>{
	let m=[];
	/*let a7=[...document.querySelectorAll('[id^="ux"]')];


	*/
	//********** bb Ğ¿ĞµÑ€ĞµÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ Ğ² bvb
	 m=[];
	 let a7=[...document.querySelectorAll('[id^="ux"]')];
	a7.forEach((x,i)=>{if(x.getAttribute('fill')=='red')
		{
		x.setAttribute('fill','black');
		x.setAttribute('opacity','.5');
		m.push(i)}}); 
	bvb=bvb.filter(i=>!i.a.every(j=>m.includes(j)));// Ğ¿Ğ¾Ğ´Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ ÑƒĞ´Ğ°Ğ»ÑÑ
	m.forEach(x=>{bvb=bvb.map(i=>
	{return {a:i['a'].filter(k=>k!==x),s:i.s,}})
	});// Ğ´ÑƒĞ±Ğ»Ğ¸ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² ÑƒĞ´Ğ°Ğ»ÑÑ
	//bvb=bvb.filter(i=>i['a'].length);//Ğ¿ÑƒÑÑ‚Ñ‹Ğµ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
	bvb=bvb.filter(i=>i.a.length);//Ğ¿ÑƒÑÑ‚Ñ‹Ğµ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
	if (m.length) bvb.push({a:m,s:''});

	bvb.sort((a,b)=>b.a.length-a.a.length);
	//**************
	///let alf='ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ‘Ğ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ';
	/*bb.forEach((x,i)=>{x.forEach(j=>{yrr[j]['a']=alf[i]})});
	let aa=yrr.map(i=>i['a']).join('');
	console.log(bb);
	ta1.value=aa;*/
	//***********
	//bvb.forEach((x,i)=>{x.a.forEach(j=>{yrr[j]['a']=alf[i]})});
	//let aa=yrr.map(i=>i['a']).join('');
	

	//**********Ğ’Ğ• ĞœĞ‘Ğ“Ğ“ ĞĞ•Ğ— ĞĞ’Ğ–Ğ‘Ğ”Ğ˜ Ğ‘ Ğ Ğ’Ğ–Ğ Ğ—Ğ•ĞĞ’ Ğ’Ğ–Ğ™Ğ‘Ğ“Ğ“ Ğ‘Ğ” Ğ˜ ĞĞšĞĞĞ™Ğ‘ĞĞ”Ğ›Ğ

	bbgun();// Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿
	
	//*******
		let alf='ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ‘Ğ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ';
		//bb.forEach((x,i)=>{x.forEach(j=>{yrr[j]['a']=alf[i]})});
		//*********
		bvb.forEach((x,i)=>{x.a.forEach(j=>{yrr[j]['a']=alf[i]})});	
		//**********
		let aa=yrr.map(i=>i['a']).join('');
		//console.log(bb);//console.log(aa);//
		ta1.value=aa;	
		console.log(bvb);
});

function svet(x){
console.log('Ñ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ»ÑÑ '+bb[x]);
let a=[...document.querySelectorAll('[id^="ux"]')];
//bb[x].forEach((y,i)=>{a[y].classList.toggle('ink1')});
//*******
bvb[x].a.forEach((y,i)=>{a[y].classList.toggle('ink1')});
}

function si(){// Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²
let a=[...document.querySelectorAll('[id^="ux"]')];
a.forEach(i=>{i.classList.remove('ink1')});
	let kiss=[...document.querySelectorAll('.uni')];
	let ra=[];
	kiss.forEach((x,i)=>{if(x.checked){
	//alert(`Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ÑÑˆĞ¸ [${ra}] Ğ¸ [${bb[i]}]`);
	ra=ra.concat(bb[i]);bb[i]=[];}});
	bb=bb.filter(i=>i.length);//Ğ¿ÑƒÑÑ‚Ñ‹Ğµ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
	//alert(ra);
	if (ra.length) bb.push(ra);
	bb.sort((a,b)=>b.length-a.length);
	//***********
	 ra=[];	
	kiss.forEach((x,i)=>{if(x.checked){
	//alert(`Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ÑÑˆĞ¸ [${ra}] Ğ¸ [${bb[i]}]`);
	//ra=ra.concat(bb[i]);bb[i]=[];}});	 
	ra=ra.concat(bvb[i].a);bvb[i].a=[];}});
	
	bvb=bvb.filter(i=>i.a.length);//Ğ¿ÑƒÑÑ‚Ñ‹Ğµ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
	//alert(ra);
	if (ra.length) bvb.push({a:ra,s:'!'});
	bvb.sort((a,b)=>b.a.length-a.a.length);	
	//***********
bbgun();// Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿	
/*	let hb=bb.map((i,j)=>
	'<label class="ki" onmousedown="svet('+j+')" style="background-position: left -'+
	(yrr[i[0]]['x']*kax)+'px top -'+
	(yrr[i[0]]['y']*kay)+'px">\r\n'+
	'<input class="uni" type="checkbox">\r\n'+
	'</label>');
	kv.innerHTML='<button id="b23"'+((bb.length>1)?'':' style="visibility:hidden;"')+
	'>union</button>'+
	'<button id="b24"'+((bb.length>0)?'':' style="visibility:hidden;"')+
	'>destroy</button>'+
	'<br>'+hb.join('');	

	b23.onclick=si;// Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ÑĞµĞ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
	b24.onclick=ci;// Ğ´ĞµÑÑ‚Ñ€Ğ¾Ğ¸Ğ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ	
	console.log(bb);
	*/
	let alf='ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ‘Ğ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ';
	//bb.forEach((x,i)=>{x.forEach(j=>{yrr[j]['a']=alf[i]})});
	//*********
	bvb.forEach((x,i)=>{x.a.forEach(j=>{yrr[j]['a']=alf[i]})});	
	//**********
	let aa=yrr.map(i=>i['a']).join('');
	//console.log(bb);//console.log(aa);//
	ta1.value=aa;	
	}
	
function ci(){ // Ğ´ĞµÑÑ‚Ñ€Ğ¾Ğ¹ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
// Ğ½Ğ°Ğ¹Ğ´ĞµĞ¼ Ğ¾Ğ´Ğ½Ñƒ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ Ğ¿Ğ¾Ğ´ ÑĞ½Ğ¾Ñ
// 
let a=[...document.querySelectorAll('label.ki')];
let a2=a.map(i=>i.querySelector('.uni').checked).filter(i=>i);
if(a2.length!==1) return;
let a3=document.querySelector('label.ki:has(.uni:checked)');
a=[...document.querySelectorAll('label.ki')];
let del;
a.forEach((x,i)=>{if(x.querySelector('.uni').checked){del=i; bb[i].forEach(y=>
	{
	let e=document.getElementById('ux'+y);
	e.setAttribute('opacity','.2');
	e.setAttribute('fill','lime');
	e.setAttribute('stroke','red');
	e.classList.remove('ink1');
	}
)}});
bb=bb.filter((x,i)=>i!==del);
//************
 del;
a.forEach((x,i)=>{if(x.querySelector('.uni').checked){del=i; bvb[i].a.forEach(y=>
	{
	let e=document.getElementById('ux'+y);
	e.setAttribute('opacity','.2');
	e.setAttribute('fill','lime');
	e.setAttribute('stroke','red');
	e.classList.remove('ink1');
	}
)}});
bvb=bvb.filter((x,i)=>i!==del);

//********
//alert(bb+'   '+del);
bbgun();// Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿

}	

function bbgun(){// Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿
	console.log('bvb='+bvb);
	/*console.log('bb='+bb);	
	let hb=bb.map((i,j)=>
	'<label class="ki" onmousedown="svet('+j+')" style="background-position: left -'+
	(yrr[i[0]]['x']*kax)+'px top -'+
	(yrr[i[0]]['y']*kay)+'px">\r\n'+
	'<input class="uni" type="checkbox">\r\n'+
	'<div class="meta">'+'</div>\r\n'+//	+(bvb[j]['s']??'')
	'<div class="kolvo">'+bb[j].length+'</div>\r\n'+	
	'</label>');
	kv.innerHTML='<button id="b23"'+((bb.length>1)?'':' style="visibility:hidden;"')+
	'>union</button>'+
	'<button id="b24"'+((bb.length>0)?'':' style="visibility:hidden;"')+
	'>destroy</button>'+
	'<br>'+hb.join('');	

	b23.onclick=si;// Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ÑĞµĞ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
	b24.onclick=ci;// Ğ´ĞµÑÑ‚Ñ€Ğ¾Ğ¸Ğ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ	

	console.log(bb);*/
	//************
	//let
	let hb=bvb.map((i,j)=>
	'<label class="ki" onmousedown="svet('+j+')" style="background-position: left -'+
	(yrr[i.a[0]]['x']*kax)+'px top -'+
	(yrr[i.a[0]]['y']*kay)+'px">\r\n'+
	'<input class="uni" type="checkbox">\r\n'+
	'<div class="meta">'+(bvb[j]['s']??'')+'</div>\r\n'+	
	'<div class="kolvo">'+bvb[j]['a'].length+'</div>\r\n'+	
	'</label>');
	kv.innerHTML='<button id="b23"'+((bvb.length>1)?'':' style="visibility:hidden;"')+
	'>union</button>'+
	'<button id="b24"'+((bvb.length>0)?'':' style="visibility:hidden;"')+
	'>destroy</button>'+
	'<br>'+hb.join('');	

	b23.onclick=si;// Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ÑĞµĞ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
	b24.onclick=ci;// Ğ´ĞµÑÑ‚Ñ€Ğ¾Ğ¸Ğ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ	

	console.log(bvb);	
	//*************
}

function fx_wat(){// ÑĞ»ĞµĞ¶ĞºĞ° Ğ·Ğ° fx
	line.setAttribute('x1',fx);
	line.setAttribute('x2',fx);
	}
 //********************* Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰Ğ°ĞµÑ‚ÑÑ ĞºÑƒÑ€ÑĞ¾Ñ€Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ°Ğ¼Ğ¸
 document.addEventListener('keydown', (e) => {// â†â†‘â†“â†’
    //if(ux)
	
	if(!(yrr[q])) return 0;
	//alert(q);
	switch(e.keyCode) {
		case 40: {//â†“
		e.preventDefault();// Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ¸Ğ»Ğ¾ÑÑŒ ĞºÑƒÑ€ÑĞ¾Ñ€Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ°Ğ¼Ğ¸
		 if(ben)
		  {
		  yrr[q]['y']=yrr[q]['y']+1;
		  fu1++;
		  fu2++;
		  }
		  else
		  {
		  yrr[q]['h']=yrr[q]['h']+1;
		  fu2++;
		  }
		  //ux.setAttribute('y',yrr[0]['y']);
		  //alert(ux.getAttribute('y'));
		  break;
		}
		case 38: {//â†‘
		e.preventDefault();
			if(ben)
		  {	
		  yrr[q]['y']=yrr[q]['y']-1;
		  fu1--;
		  fu2--;
		  }
		  else
		  {
		  yrr[q]['h']=yrr[q]['h']-1;
		  fu2--;
		  }
		  break;
		}	  
		case 39: {//â†’
		e.preventDefault();
			if(ben)
			{
		  yrr[q]['x']=yrr[q]['x']+1;
		  fx++;
		  }
		  else
		  {
		  yrr[q]['w']=yrr[q]['w']+1;
		  fx++;
		  }
		  break;
		}
		case 37: {//â†
		e.preventDefault();
			if(ben)
			{
		  yrr[q]['x']=yrr[q]['x']-1;
		  fx--;
		  }
		  else
		  {
		  yrr[q]['w']=yrr[q]['w']-1;
		  fx--;
		  }
		  break;
		}
		case 96: { // numpad0
			ben=!ben;
			yrr[q]['stroke']=['purple','red'][+ben];
			break;
		}
		case 32: //space
		btn3.click();
		
		default: break;
	  }
	  fx_wat();// ÑĞ»ĞµĞ¶ĞºĞ° Ğ·Ğ° fx
	  
	  let a=[...document.querySelectorAll('[id^="ux"]')];
	  a[q].setAttribute('x',(yrr[q]['x']).toFixed(1));
	  a[q].setAttribute('y',(yrr[q]['y']).toFixed(1));
	  a[q].setAttribute('width',(yrr[q]['w']).toFixed(1));
	  a[q].setAttribute('height',(yrr[q]['h']).toFixed(1));
	  /*a[q].setAttribute('opacity',yrr[q]['opacity']);	  
	  a[q].setAttribute('fill',yrr[q]['fill']);	  
	  a[q].setAttribute('stroke',yrr[q]['stroke']);*/
	  
	  }

	);
	
function shz(x){// Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» Ğ¼ĞµÑ‚ĞºÑƒ Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ
let a=[...document.querySelectorAll('.uni')];

//a.forEach((y,i)=>{if(y.checked){bbv[i]=x.innerText;   }});//alert(bbv); 
//******
a.forEach((y,i)=>{if(y.checked){bvb[i].s=x.innerText;  }});// alert(bvb); 
//******
bbgun();

}	
//**********************************************
//**â–ˆâ–ˆâ–ˆ*â–ˆ*â–ˆ*â–ˆâ–ˆâ–ˆ*****â–ˆâ–ˆâ–ˆ**â–ˆ***â–ˆ**â–ˆâ–ˆ**************
//***â–ˆ**â–ˆ*â–ˆ*â–ˆ********â–ˆ***â–ˆ***â–ˆ*â–ˆ**â–ˆ*************
//***â–ˆ**â–ˆâ–ˆâ–ˆ*â–ˆâ–ˆâ–ˆ******â–ˆ***â–ˆ*â–ˆ*â–ˆ*â–ˆ**â–ˆ*************
//***â–ˆ**â–ˆ*â–ˆ*â–ˆ********â–ˆ***â–ˆ*â–ˆ*â–ˆ*â–ˆ**â–ˆ*************
//***â–ˆ**â–ˆ*â–ˆ*â–ˆâ–ˆâ–ˆ******â–ˆ****â–ˆ*â–ˆ***â–ˆâ–ˆ**************
//**********************************************
/*Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½Ğ¸Ğ» Ğ¾Ğ±Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ Ğ² Ğ¾Ğ´Ğ½Ñƒ */
var proga=2;
/*
i.style.display='block';
graf.style.display='grid';
fa.style.display='flex';
pex.style.display='flex';
*/
var ir,ib;
let ws;// ĞºĞ¾Ğ¾Ñ€Ğ´Ñ‹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹ Ğ±Ğ°ÑˆĞµĞ½


var dataru=1;
var droba=false; // ÑĞ»Ğ¾Ğ²Ğ° Ğ±Ğ¾Ğ»ĞµĞµ 35 Ğ±ÑƒĞºĞ² Ğ´Ñ€Ğ¾Ğ±Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ¼ĞµĞ»ĞºĞ¸Ğµ


let ef='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
let nom='ru';

const z=
[{
      //  Ğ  Ğ‘  Ğ’  Ğ“  Ğ”  Ğ•  Ğ  Ğ–  Ğ—  Ğ˜  Ğ™  Ğš  Ğ›  Ğœ  Ğ  Ğ  ĞŸ  Ğ  
	  fq:[21,7 ,14,4 ,9 ,34,0 ,4 ,12,21,11,11,12,16,35,38,8 ,12,
		//  Ğ¡  Ğ¢  Ğ£  Ğ¤  Ğ¥  Ğ¦  Ğ§  Ğ¨  Ğ©  Ğª  Ğ«  Ğ¬  Ğ­  Ğ®  Ğ¯  _
			18,19,8 ,2 ,5 ,1 ,4 ,3 ,2 ,0 ,13,3 ,0 ,0 ,11,45],
 af:[...'ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯'],
 qf:[...'ĞĞĞ•ĞĞ˜Ğ¢Ğ¡ĞœĞ’Ğ«Ğ›Ğ—Ğ Ğ™ĞšĞ¯Ğ”ĞŸĞ£Ğ‘Ğ¥Ğ“Ğ–Ğ§Ğ¬Ğ¨Ğ¤Ğ©Ğ¦Ğ®Ğ­ĞªĞ'],
},

{
	// A   B   C   D   E   F   G   H   I   J   K   L   M
  fq:[ 82, 15, 28, 43,127, 22, 20, 61, 70,  2,  8, 40, 24, 

	//  N   O   P   Q   R   S   T   U   V   W   X   Y   Z
		68, 75, 19,  1, 60, 63, 91, 28, 10, 24,  2, 20,  1],	
 af:[...'ABCDEFGHIJKLMNOPQRSTUVWXYZ'],
 qf:[...'ETAOINSHRDLCUMWFGYPBVKJXQZ'],
},

];




let f;
let o; // Ğ¾Ğ±ÑŒĞµĞºÑ‚
let p;// Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ğ° ÑˆĞ¸Ñ„Ñ€Ğ¾Ñ‚ĞµĞºÑÑ‚Ğ°
let hu,hi;
let t=[];// abcd
let s1;





function dragElement(ass) {//Make the DIV element draggagle:
	var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
	ass.onmousedown = dragMouseDown;

	function dragMouseDown(e) {
		e = e || window.event;
		// get the mouse cursor position at startup:
		pos3 = e.clientX;
		pos4 = e.clientY;
		document.onmouseup = closeDragElement;
		// call a function whenever the cursor moves:
		document.onmousemove = elementDrag;
		}

	function elementDrag(e) {
		e = e || window.event;
		// calculate the new cursor position:
		pos1 = pos3 - e.clientX;
		pos2 = pos4 - e.clientY;
		pos3 = e.clientX;
		pos4 = e.clientY;
		// set the element's new position:
		ass.style.top = (ass.offsetTop - pos2) + "px";
		ass.style.left = (ass.offsetLeft - pos1) + "px";
		}

	function closeDragElement() {
		/* stop moving when mouse button is released:*/
		document.onmouseup = null;
		document.onmousemove = null;
		conny(nom);// Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ´ĞµÑˆĞ¸
		}
}


/*
const ss='Ğ˜ Ğ¤Ğ­ĞŸĞ­ Ğ¨Ğ˜Ğ©Ğ Ğ®Ğ¡Ğ©Ğ¬Ğ” Ğ¦ĞŸĞ¡Ğ®Ğ–Ğ®. ĞŸĞ¦Ğ¡Ğ”Ğ§Ğ©Ğ­, Ğ–Ğ‘Ğ«Ğ Ğ¡Ğ¥Ğ­, Ğ–Ğ®Ğ– ĞĞ­Ğ¡Ğ“Ğ¥Ğ­ Ğ®ĞĞ‘Ğ¦Ğ¬Ğ“Ğ®Ğ“Ğ¥. Ğ© Ğ¬Ğ®Ğ‘Ğ®Ğš, Ğ–Ğ¦Ğ“Ğ¦Ğ‘Ğ¥Ğš Ğ–Ğ®Ğ›Ğ®Ğ¡Ğ¬Ğ Ğ¬ Ğ›Ğ­Ğ¢Ğ¡Ğ© Ğ¦ĞœĞ­Ğ¤Ğ” Ğ¦ĞŸĞ¥Ğ–Ğ¤Ğ¦Ğ˜Ğ­Ğ¤Ğ¤Ğ¥Ğ¢, Ğ’Ğ¡Ğ¥Ğ¡ Ğ¤Ğ®Ğ˜Ğ¬Ğ“Ğ‘Ğ­ĞœĞ« Ğ¦ĞŸĞ¡Ğ®Ğ–Ğ®Ğ¢, ĞŸĞ«Ğ¨Ğ“Ğ¦ Ğ’Ğ¦Ğ¨Ğ¤ĞĞ“Ğ¥Ğš Ğ˜ Ğ¤Ğ­ĞŸĞ¦ Ğ–Ğ¦Ğ‘Ğ®ĞŸĞ¡Ğ”. Ğ® Ğ¨Ğ˜Ğ¦Ğ‘ Ğ¤Ğ®Ğ’Ğ¦Ğ¢Ğ©Ğ¤Ğ®Ğ¡ Ğ’Ğ¦Ğ˜Ğ­Ğ‘Ğ£Ğ¤Ğ¦Ğ¬Ğ“Ğ” Ğ’Ğ¡Ğ®Ğ¤Ğ­Ğ“Ğ¥, Ğ«Ğ˜Ğ©Ğ¨Ğ­Ğ¤Ğ¤Ğ«Ğ¯ Ğ¬ Ğ–Ğ¦Ğ¬Ğ¢Ğ©ĞœĞ­Ğ¬Ğ–Ğ¦Ğš Ğ˜Ğ¥Ğ¬Ğ¦Ğ“Ğ¥. Ğ¦Ğ¬Ğ“Ğ‘Ğ¦Ğ˜Ğ–Ğ© Ğ’Ğ¥Ğ¡Ğ”Ğ¤Ğ¦Ğš Ğ“Ğ‘Ğ®Ğ˜Ğ¥, Ğ’Ğ­Ğ‘Ğ­Ğ¬Ğ¥Ğ’Ğ®Ğ¤Ğ¤Ğ¦Ğš Ğ¬Ğ­Ğ¨Ğ¥Ğ¢Ğ© Ğ§Ğ®Ğ‘Ğ©Ğ–Ğ®Ğ¢Ğ© Ğ¦Ğ¨Ğ«Ğ˜Ğ®Ğ¤ĞœĞ©Ğ–Ğ¦Ğ˜, ĞŸĞ¥Ğ¡Ğ© Ğ’Ğ¦Ğ£Ğ¦ĞĞ© Ğ¤Ğ® Ğ›Ğ­Ğ¡Ğ­Ğ¤Ğ¥Ğš Ğ®Ğ‘Ğ£Ğ©Ğ’Ğ­Ğ¡Ğ®Ğ , Ğ® Ğ¨Ğ¦ĞĞ¨Ğ­Ğ˜Ğ®Ğ Ğ˜Ğ¦Ğ¨Ğ® Ğ˜ ĞŸĞ¦ĞœĞ–Ğ­ Ğ« Ğ¬Ğ®Ğ‘Ğ®Ğ, Ğ¬Ğ¡Ğ¦Ğ˜Ğ¤Ğ¦ Ğ–Ğ‘Ğ«Ğ Ğ¡Ğ¦Ğ­ Ğ¦Ğ›Ğ­Ğ‘Ğ¦ Ğ˜ Ğ¦Ğ“Ğ˜Ğ­Ğ¬Ğ¤Ğ¥Ğ£ ĞŸĞ­Ğ‘Ğ­Ğ Ğ®Ğ£, Ğ¬Ğ˜Ğ­Ğ“Ğ©Ğ¡Ğ¦Ğ¬Ğ” Ğ Ğ¦Ğ¡Ğ«ĞŸĞ¦Ğš Ğ¬Ğ©Ğ¤Ğ­Ğ˜Ğ¦Ğš. Ğ¢Ğ®Ğ¡Ğ”ĞœĞ©Ğ– Ğ¡Ğ¯ĞŸĞ©Ğ¡ Ğ˜Ğ¬Ğ­Ğ¢Ğ« Ğ¤Ğ® Ğ¬Ğ˜Ğ­Ğ“Ğ­ Ğ¨Ğ®Ğ˜Ğ®Ğ“Ğ” Ğ©Ğ¢Ğ­Ğ¤Ğ® Ğ© Ğ¤Ğ®Ğ›Ğ˜Ğ®Ğ¤Ğ©Ğ. Ğ¦Ğ¤Ğ© Ğ˜Ğ¬Ğ­Ğ Ğ¨Ğ® Ğ’Ğ‘Ğ©Ğ¨Ğ«Ğ¢Ğ¥Ğ˜Ğ®Ğ¡Ğ©Ğ¬Ğ” Ğ¬Ğ‘Ğ®Ğ›Ğ«. Ğ›Ğ­Ğ‘Ğ–Ğ®Ğ¡Ğ”Ğ•Ğ­ Ğ˜Ğ¦Ğ¨Ğ¥ Ğ˜ ĞŸĞ¦ĞœĞ–Ğ­ Ğ¦Ğ¤ Ğ¤Ğ®Ğ›Ğ˜Ğ®Ğ¡ Ğ¦Ğ›Ğ­Ğ‘Ğ¦Ğ¢ Ğ¬Ğ©Ğ¤Ğ­Ğ Ğ¦ Ğ¬Ğ˜Ğ­Ğ“Ğ®, Ğ® Ğ’ĞĞ“Ğ¤Ğ® Ğ“Ğ‘Ğ®Ğ˜Ğ¥ Ğ®Ğ‘Ğ£Ğ©Ğ’Ğ­Ğ¡Ğ®Ğ Ğ¦Ğ¢ Ğ¤Ğ­Ğ©Ğ›Ğ˜Ğ­Ğ¨Ğ®Ğ¤Ğ¤Ğ¥Ğ£ Ğ¡Ğ­Ğ¬Ğ¦Ğ˜.';

main(ss);
*/


function main(ss){
platr.innerHTML=z[0]['qf'].map((x,i)=>
	{return '<div class="ivan iba1" style="height:'+
	(z[0]['fq'][z[0]['af'].indexOf(x)]+21)+
	'px;">'+x+'</div>'}).join('');

plate.innerHTML=z[1]['qf'].map((x,i)=>
	{return '<div class="ivan iba2" style="height:'+
	(z[1]['fq'][z[1]['af'].indexOf(x)]/3+21)+
	'px;">'+x+'</div>'}).join('');



fa.innerHTML=[
		'<div class="ru">'+
		z[0]['qf'].map((x,i)=>
			{return '<div class="ivan ira1" style="height:'+
			(z[0]['fq'][z[0]['af'].indexOf(x)]+21)+
			'px;'+
			'">'+x+'</div>'}).join('')+'</div>',
		'<div class="en">'+	
		z[1]['qf'].map((x,i)=>
			{return '<div class="ivan ira2" style="height:'+
			(z[1]['fq'][z[1]['af'].indexOf(x)]/3+21)+
			'px;visibility:hidden'+
			'">'+x+'</div>'}).join('')+'</div>',		
	].join('');
/*
fa.innerHTML=z[0]['qf'].map((x,i)=>
	{return '<div class="ivan ira1" style="height:'+
	(z[0]['fq'][z[0]['af'].indexOf(x)]+21)+
	'px;">'+x+'</div>'}).join('');
*/
p=new Set([...ss].filter(x=>z[0]['af'].indexOf(x)>-1));
const d=Array.from(p).join('');//Ğ³Ğ¾Ñ€Ğ´
const q=[...ss].filter(x=>z[0]['af'].indexOf(x)>-1)// Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°
	.reduce((a,x)=>{a[x]=~~a[x]+1;return a},{})
let c=z[0]['af'].filter(i=>i in q).sort((a,b)=>q[b]-q[a]).map(i=>q[i]-1);//21,14,13
const qa=z[0]['af'].filter(i=>i in q).sort((a,b)=>q[b]-q[a]).join('');//Ğ¾Ñ‚ĞµĞ¸c
//s1=[...ss].map(x=>(qa.indexOf(x)>-1)?z[0]['ef'][qa.indexOf(x)]:x).join('');
s1=[...ss].map(x=>(qa.indexOf(x)>-1)?ef[qa.indexOf(x)]:x).join('');
//s1=[...ss].map(x=>(qa.indexOf(x)>-1)?ef[qa.indexOf(x)]:x).join('');
//********************************************

const booa=[...ef].map(x=>{/// Ğ¾Ğ´Ğ½Ğ¾Ğ±ÑƒĞºÑ‹ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°
	let e=new RegExp('\\b'+x+'\\b','g');
	return e.test(s1);
});

const boob=[...ef].map(x=>{/// ÑƒĞ´Ğ²Ğ¾Ğ¹ĞµĞ½Ğ½Ñ‹Ğµ Ğ±ÑƒĞºĞ²Ñ‹
	let e=new RegExp(x+x);
	return e.test(s1);
});

let sot=new Set();// Ğ¢Ğ˜ĞŸĞ ĞºĞ»ÑÑ‡ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¼ĞµĞ½Ñ‹
let key=[];
[...ss].forEach(x=>{
	if((z[0]['af'].indexOf(x)>-1)&&!sot.has(x))key.push(x); 
	sot.add(x)
});
key=key.concat(z[0]['af'].filter(x=>!sot.has(x)));


//***************************************
t=[];
//for (let i=0; i<d.length; i++){t.push(z[0]['ef'][i])}
for (let i=0; i<d.length; i++){t.push(ef[i])}
t=t.join('');
	
let iq4=[...t].map((x,i)=>//Ğ°Ğ´Ğ´Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¾Ğ±ÑŒĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ²ÑƒÑ… ĞºĞ¾Ğ»Ğ¾Ğ´ - Ğ½ĞµĞ±Ğ¾ÑĞºÑ€ĞµĞ±Ñ‹ Ğ¸ Ğ±ÑƒĞºĞ²Ñ‹
'<fieldset class="km'+
`${(booa[i])?' a':''}`+ //Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑˆÑ‚Ñ€Ğ¸Ñ…
`${(boob[i])?' b':''}`+ // Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½ ÑˆÑ‚Ñ€Ğ¸Ñ…
	'" style="left:'+(i*46)+'px">'+x+'</fieldset>').join('');	
fa.innerHTML+=iq4;
//*************************
ir={
	ru:[...document.querySelectorAll('.ira1')],
	en:[...document.querySelectorAll('.ira2')],
};// Ğ¿Ğ¾Ğ´Ğ²Ğ¸Ğ¶Ğ½Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹
ib={
	ru:[...document.querySelectorAll('.iba1')],
	en:[...document.querySelectorAll('.iba2')],
};// Ğ½ĞµĞ¿Ğ¾Ğ´Ğ²Ğ¸Ğ¶Ğ½Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹         
ir['ru'].forEach((x,i)=>{
	x.style.left = ib['ru'][i].offsetLeft+'px';
	x.style.top = ib['ru'][i].offsetTop+'px';
	});
ir['en'].forEach((x,i)=>{
	x.style.left = ib['en'][i].offsetLeft+'px';
	x.style.top = ib['en'][i].offsetTop+'px';
	});	
	

z[0]['af'].forEach((x,i)=>{dragElement(ir['ru'][i])});
z[1]['af'].forEach((x,i)=>{dragElement(ir['en'][i])});
//*****************************

hu=document.querySelectorAll('.km');
//c=c.map(x=>(!x)?1:x);//Ğ¸Ğ·Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒÑÑ Ğ¾Ñ‚ Ğ½ÑƒĞ»ĞµĞ¹

console.log(c);////ğŸ¸

let kit;
//c.forEach((x,i)=>kit=(!i)&&(!x));//
kit=(!c[0]);
console.log(kit);
c.forEach((x,i)=>{console.log(x)});//
hi=(!kit)?c.map((x,i)=>`${43+c[i]*400/c[0]|0}px`):c.map(x=>'223px');
//hi=c.map((x,i)=>`${43+c[i]*400/c[0]|0}px`);
console.log(hi);
[...hu].forEach((x,i)=>{x.style.height=hi[i]});// Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° Ğ½ĞµĞ±Ğ¾ÑĞºÑ€ĞµĞ±Ğ¾Ğ²

const sit=()=>{
	ws=[...hu].map(x=>{return {// ĞºĞ¾Ğ¾Ñ€Ğ´Ñ‹ Ğ¿Ğ¾ÑĞ°Ğ´Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ğ¼ĞµÑÑ‚
		x1:x.offsetLeft,
		x2:x.offsetLeft+x.offsetWidth,
		y1:x.offsetTop,
		y2:x.offsetTop+x.offsetHeight
	}});
	ir['ru'].forEach((x,i)=>{
		x.style.left = ib['ru'][i].offsetLeft+'px';
		x.style.top = ib['ru'][i].offsetTop+'px';
		});
	ir['en'].forEach((x,i)=>{
		x.style.left = ib['en'][i].offsetLeft+'px';
		x.style.top = ib['en'][i].offsetTop+'px';
		});	
}

sit();// Ğ¿ĞµÑ€ĞµÑÑ‡ĞµÑ‚ ĞºĞ¾Ğ¾Ñ€Ğ´ Ğ¿Ğ¾ÑĞ°Ğ´Ğ¾Ğº
conny('ru');// Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ´ĞµÑˆĞ¸
conny('en');// Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ´ĞµÑˆĞ¸
window.onresize=()=>{
	sit();
	conny(nom);// Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ´ĞµÑˆĞ¸
}
//*******************
}// end main



function conny(pok){// Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ´ĞµÑˆĞ¸
	o=[...t].reduce((a,x)=>{a[x]='.'; return a},{});
	[...ir[pok]].forEach((x,i)=>{//'ru' 'en'
		let v=x.offsetLeft+ 12;
		let w=x.getBoundingClientRect().top+20;
		let b=x.innerText;
		for(let j=0; j<t.length;j++){//Ğ² ĞºĞ°ĞºÑƒÑ Ğ±Ğ°ÑˆĞ½Ñ Ğ¿Ğ¾Ğ¿Ğ°Ğ»
			f=w>ws[j].y1&&w<ws[j].y2;
			if(f&&(v>ws[j].x1)&&(v<ws[j].x2)){o[t[j]]=b}	
		}
	});
	m1.innerHTML=[...s1].map(x=>x).join('');//DAS
	m2.innerHTML=[...s1].map(x=>(x in o)?o[x]:x).join('');
	m3.innerHTML=m2.innerHTML;
}
</script>   
</body>
</html>
